.\" Automatically generated by Pandoc 2.19.2
.\"
.\" Define V font for inline verbatim, using C font in formats
.\" that render this, and otherwise B font.
.ie "\f[CB]x\f[]"x" \{\
. ftr V B
. ftr VI BI
. ftr VB B
. ftr VBI BI
.\}
.el \{\
. ftr V CR
. ftr VI CI
. ftr VB CB
. ftr VBI CBI
.\}
.TH "BEAR" "1" "Jan 02, 2023" "Bear User Manuals" ""
.hy
.SH NAME
.PP
Bear - a tool to generate compilation database for Clang tooling.
.SH SYNOPSIS
.PP
bear [\f[I]options\f[R]] -- [\f[I]build command\f[R]]
.SH DESCRIPTION
.PP
The JSON compilation database
<http://clang.llvm.org/docs/JSONCompilationDatabase.html> is used in
Clang project to provide information how a single compilation unit was
processed.
When that is available then it is easy to re-run the compilation with
different programs.
.PP
Bear executes the original build command and intercept the command
executions issued by the build tool.
From the log of command executions it tries to identify the compiler
calls and creates the final compilation database.
.SH OPTIONS
.TP
--version
Print version number.
.TP
--help
Print help message.
.TP
--verbose
Enable verbose logging.
.TP
--output \f[I]file\f[R]
Specify output file.
(Default file name provided.)
The output is a JSON compilation database.
.TP
--append
Use previously generated output file and append the new entries to it.
This way you can run Bear continuously during work, and it keeps the
compilation database up to date.
File deletion and addition are both considered.
But build process change (compiler flags change) might cause duplicate
entries.
.TP
--config \f[I]file\f[R]
Specify a configuration file.
The configuration file captures how the output should be formatted and
which entries it shall contain.
.TP
--force-preload
Force to use the dynamic linker method of \f[V]intercept\f[R] command.
.TP
--force-wrapper
Force to use the compiler wrapper method of \f[V]intercept\f[R] command.
.SH COMMANDS
.TP
\f[V]bear-intercept(1)\f[R]
Intercepts events that happend during the execution of the build
command.
.TP
\f[V]bear-citnames(1)\f[R]
Deduce the sematics of the commands captured by
\f[V]bear-intercept(1)\f[R].
.SH OUTPUT
.PP
The JSON compilation database definition changed over time.
The current version of Bear generates entries where:
.TP
\f[V]directory\f[R]
has absolute path.
.TP
\f[V]file\f[R]
has absolute path.
.TP
\f[V]output\f[R]
has absolute path.
.TP
\f[V]arguments\f[R]
used instead of \f[V]command\f[R] to avoid shell escaping problems.
(Configuration can force to emit the \f[V]command\f[R] field.)
The compiler as the first argument has absolute path.
Some non compilation related flags are filtered out from the final
output.
.SH CONFIG FILE
.PP
Read \f[V]citnames\f[R] man page for the content of this file.
\f[V]bear\f[R] is not reading the content of this file, but passing the
file name to \f[V]citnames\f[R].
.SH EXIT STATUS
.PP
The exit status of the program is the exit status of the build command.
Except when the program itself crashes, then it sets to non-zero.
.SH TROUBLESHOOTING
.PP
The potential problems you can face with are: the build with and without
Bear behaves differently or the output is empty.
.PP
The most common cause for empty outputs is that the build command did
not execute any commands.
The reason for that could be, because incremental builds not running the
compilers if everything is up-to-date.
Remember, Bear does not understand the build file (eg.: makefile), but
intercepts the executed commands.
.PP
The other common cause for empty output is that the build has a
\[lq]configure\[rq] step, which captures the compiler to build the
project.
In case of Bear is using the \f[I]wrapper\f[R] mode (read
\f[V]intercept\f[R] man page), it needs to run the configure step with
Bear too (and discard that output), before run the build with Bear.
.PP
There could be many reasons for any of these failures.
It\[cq]s better to consult with the project wiki page for known
problems, before open a bug report.
.SH COPYRIGHT
.PP
Copyright (C) 2012-2022 by L\['a]szl\['o] Nagy
<https://github.com/rizsotto/Bear>
.SH AUTHORS
L\['a]szl\['o] Nagy.
